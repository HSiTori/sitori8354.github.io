<html>
<head>
 <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
 <link rel="stylesheet" type="text/css" href="main.css/todolist.css"/>
 <link rel="stylesheet" type="text/css" href="main.css/main.css"/>
 <link href='//fonts.googleapis.com/css?family=Nova Round' rel='stylesheet'>
 <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
 <script src="js/todolist.js"></script>
 <script src="js/ForerunnerDB.js"></script>
 <script src="js/know.js"></script>
<title>interesting class</title>
</head> 
<style>
</style>
<body class="body">
<div id="background">
 <nav class="navbar navbar-inverse">
<div class="container-fluid">
<div id="container-headbox"> 
 <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
<div class="collapse navbar-collapse navbar-collapse-center" id="myNavbar">   
 <ul class="nav navbar-nav">
   <li><a href="#">Wind</a></li>
   <li><a href="#">Home</a></li>
   <li><a href="#">Main</a></li>       
 </ul> 
 <ul class="nav navbar-nav navbar-right">
   <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Personal(≧▽≦)<span class="caret"></span></a>
 <ul class="dropdown-menu">
   <li><a href="#" data-toggle="modal" data-target="#myModal">Little Notebook</a></li>
   <li><a href="#" data-toggle="modal" data-target="#bs-example-modal-lg">Friends</a></li>
   <li role="separator" class="divider"></li>
   <li><a href="#">Separated link</a></li>
 </ul>
  </li>
</ul>
 </div>
</div> 
</div>
</nav>

<div class="container">
<div class="row"> 

<div class="col-md-12">
  <input id='search'><input type="button" class="btn btn-primary" onclick="searchdetail();" value="SEARCH">
</div>
 
<div class="col-md-12">
   男生<input id="gender" type="checkbox" name="boy" value="boy">
   女生<input id="gender" type="checkbox" name="girl" value="girl">
   <input type="button" class="btn btn-primary" onclick="select();" value="篩選"> 
</div>
 
 
<div class="col-md-12">
   <input type="number" id="searchmore" placeholder="大於...">
   <input type="number" id="searchless" placeholder="小於..."> 
   <input id='search'><input type="button" class="btn btn-primary" onclick="" value="篩選">
</div>
 
<div class="col-md-6">
  <div class="select-body" style="width: 500px;">
       <div class="container" style="width: 500px;">
        <div class="form-group">
          <label for="inputage">你的名字</label>
          <input id="name" type="text" class="form-control" placeholder="Enter your name">
          <small id="joke" class="form-text text-muted"></small>
        </div>
        <div class="form-group">
          <label for="inputage">年齡</label>
          <input id="age" type="text" class="form-control" placeholder="Enter your age">
          <small id="joke" class="form-text text-muted"></small>
        </div>
        <div class="form-group">
          <label for="inputage">性別</label>
          <input id="sex" type="text" class="form-control" placeholder="boy or girl?">
          <small id="joke" class="form-text text-muted"></small>
        </div>
        <div class="form-group">
          <label for="inputother">其他</label>
          <input id="comment" type="text" class="form-control" placeholder="something else?">
          <small id="joke" class="form-text text-muted"></small>
       </div>
       <select id="job-id">
        <option value="">請選擇職業</option>
        <option value="1beda312sd">學生</option> 
       </select> 
      <button type="button" class="btn btn-default" id="enter" onclick="quest();">Enter</button>
      <button type="button" class="btn btn-default" id="list" onclick="showdata();">跑出資料</button>
    </div>
   </div>
</div>
 

<h4>ADD JOB</h4>
<input id='add-job-input'><input id='add-job-btn' type="button" class="btn btn-primary" onclick="addjob();" value="新增">

 
<div class="col-md-6">
 <div id="friendlist">
 <table id="friendtable" class="table table-hover" style="width: 500px; height: 40px;">
  <thead>
     <tr>
        <td>ID</td>
        <td>名字</td>
        <td>性別</td>
        <td>年紀</td>
        <td>其他</td>
        <td>操作</td>
     </tr>
  </thead>
  <tbody>
  </tbody>
 </table>
 </div>
 </div>
 
 <div class="col-md-6">
 <div id="job-type">
 <input type="button" onclick="showjob();" value='跑出資料'> 
 <table id="table-job" class="table table-hover" style="width: 500px; height: 40px;">
  <thead>
     <tr>
      <td>id</td>  
      <td>職業</td>
     </tr>
  </thead>
  <tbody>
  </tbody>
 </table>
 </div>
 </div>
 

 
<div id="todolist"> 
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content-todo">
     <div id="listbg"> 
     <div class="modal-header-todo">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
         <h4 class="modal-title" id="myModalLabel">Notebook(⁎˃ᆺ˂)</h4>
      </div>
      <div class="modal-body-todo">
       <div class="container">
          <input id="input" class="js-task-checkbox" type="text"><button id="add-button" class="btn btn-info btn-sm" onclick="addTask();">加入</button>
       <div class="clear-float">
         <ul id="task-list" style="list-style: none">
          <li class="delete"></li> 
         </ul>
       </div>
      </div>
     </div>
      <div class="modal-footer-todo">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    </div>
  </div>
</div> 
</div>
 
<div class="modal fade" id="bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3>交個朋友吧~</h3>
        <h6>來嘛來嘛!互相交個朋友吧///這裡有些小小的問題想要問你~~~要好好回答喲////</h6> 
      </div>
      <div class="modal-body">
       <div class="container">
        <div class="row">
        <ul>
        <li>
        <h4>你 是 誰 ?</h4>
        <h6>來 來，告訴我你的名字，不然不知道怎麼稱呼你喔OwO</h6>
        <div class="col-md-2"><input type="text" class="form-control" id="aaaname"/></div>
        </li>
        <li>
        <h4>敢 問 芳 齡 ??</h4>
        <h6>(小聲)偷偷告訴我你的年紀嘛~~</h6>
        <div class="col-md-2"><input type="text" class="form-control" id="aaaage"/></div>
        </li>
        <br>
        <li>
         <h4>還有甚麼話想跟我說的??說越多我越高興喔喔喔www</h4>
         <div class="col-md-4"><textarea type="text" class="form-control" rows="2" id="aaacomment"></textarea></div>
        </li>
         </ul>  
        </div>
        </div>
     </div>
         <div class="modal-footer">
         <button type="button" class="btn btn-default" data-dismiss="modal" id="enter" onclick="quest();">Enter</button>
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div> 

<div id="answer" class="modal fade bs-example-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
     <div class="modal-header">
     <h1>搜尋結果:</h1>
     <p id="searchresult"></p>
     <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
     </div>
    </div> 
  </div>
</div>

 

 
<div id="changedata" class="modal fade bs-example-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
     <div class="modal-header">
       <h1>修改資料</h1>   
     <div class="modal-body">
     <div class="container">
     <div class="row">
      <form>
      <div class="form-group">
        <label for="inputname">想要更改的名字?</label>
        <input class="form-control" id="inputname" placeholder="Enter your name">
        <small id="joke" class="form-text text-muted">呵呵呵呵呵呵</small>
      </div>
      <div class="form-group">
        <label for="inputage">想要更改的年齡?</label>
        <input class="form-control" id="inputage" placeholder="Enter your age">
        <small id="joke" class="form-text text-muted">呵呵呵呵呵呵</small>
      </div>
      <div class="form-group">
        <label for="inputother">其他?</label>
        <input class="form-control" id="inputother" placeholder="others">
        <small id="joke" class="form-text text-muted">呵呵呵呵呵呵</small>
      </div>
      </form>
     </div>
     </div>
     </div>
      <div class="modal-footer">
         <button type="button" class="btn btn-default" data-dismiss="modal" id="change" onclick="changedetail();">Enter</button>
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
     <p id="searchresult"></p>
      </div>
    </div>
  </div>
</div>
</div>
 
<script>
 
 var fdb = new ForerunnerDB();
 var db = fdb.db("friend");
 var friendCollection = db.collection('friend');
 friendCollection.load(); 
 $("div#friendlist").hide();

  function quest(){
    var  q1 = $("input#name").val();
    $("input#name").val("");
    var  q2 = $("input#age").val();
    $("input#age").val("");
    var  q3 = $("input#comment").val();
    $("input#comment").val("");
    var  q4 = $("input#sex").val();
    $("input#sex").val("");
   var newfriend = {
    name: q1,
    age: q2,
    others: q3,
    sex: q4
 };
  if(q1!==""){
   friendCollection.insert(newfriend);
  friendCollection.save();
  }else{
    alert("請輸入名字")
  }
  showdata();
  }  
 
 $("#input").val("");

 function showdata(){
 $("#friendtable tbody").text("");
 $("div#friendlist").show();
 for(var i=0;i<friendCollection.find().length;i++){
  var comment = "<tr>"+"<td>"+friendCollection.find()[i]._id+"</td>"+"<td>"+friendCollection.find()[i].name+"</td>"+"<td>"+friendCollection.find()[i].sex+"</td>"+"<td>"+friendCollection.find()[i].age+"</td>"+"<td>"+friendCollection.find()[i].others+"</td>"+"<td><input type='button' class='btn btn-info' id='changefirst' data-id='"+friendCollection.find()[i]._id+"' data-toggle='modal' data-target='#changedata' onclick='changedefirst();' value='修改'>&nbsp<input type='button' class='btn btn-danger btn-xs"+i+"' onclick='deletedetail("+i+");' value='刪除'></td></tr>";
  $("table#friendtable tbody").append(comment);
 };
 };
$("table").on("click","button#enter",quest);
  

 
 function deletedetail(i){
  var r=confirm("確定要刪除嗎?")
  console.log(i);
  if (r==true){
  friendCollection.remove({
    _id: friendCollection.find()[i]._id
});
  friendCollection.save();
  showdata();
  }
  else
    {
    alert("好的!不刪除!");
    }
 } 
  
result = collection.find({


})

function searchdetail(){
  var query = {
    name: $("input#search").val()
};
  var result = friendCollection.find(query);
  if(result!=""){
  $("p#searchresult").text("");
  for(var i=0;i<result.length;i++){
  var searchdata = "Name:"+"&nbsp;"+result[i].name+"<br>"+"Sex:"+"&nbsp;"+result[i].sex+"<br>"+"Age:"+"&nbsp;"+result[i].age+"<br>"+"Others:"+"&nbsp;"+result[i].others+"<br>" 
  $("p#searchresult").append(searchdata)
  }
  $("div#answer").modal();
  }else{
  alert("搜尋錯誤");
  }
 $("input#search").val("");
 }
 
function select(){ 
var checklist = [ ]
for(var i=0;i<$("#gender:checked").length;i++){
    checklist.push($("#gender:checked")[i].value)
   }
}
 
//if($("searchless").val()!==""){
// "$lt"=$("searchless").val();
// "$gt"=$("searchmore").val();
// 
//   }else if(){
//}else{
//} 
 
 var jobCollection = db.collection('job');
 jobCollection.load(); 
 
 function addjob(){
  var a1 = $('add-job-btn').val();
   $('input#add-job-btn').val('');
  var newjob = {
     type: a1
  };
  if(a1!==""){
    jobCollection.insert(newjob);
    jobCollection.save();
  }else{
    alert("請輸入一個新職業")
  }
 }
 
 function showjob(){
  $('#table-job tbody').text('');
  $('div#job-type').show();
  for(var i=0;i<jobCollection.find().length;i++)
    var data = '<tr>'+'<td>'+jobCollection.find()[i]._id+'</td>'+'<td>'+jobCollection.find()[i].type+'</td>'+'</tr>';
    $("table#jobtable tbody").append(data);
 }
 $("table").on("click","button#add-job-btn",addjob);
 </script>
 <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
 <script type="text/javascript" src="js/bootstrap.min.js"></script>
 </body>
</html> 
  
