<html>
<head>
 <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
 <link rel="stylesheet" type="text/css" href="main.css/todolist.css"/>
 <link rel="stylesheet" type="text/css" href="main.css/main.css"/>
 <link href='//fonts.googleapis.com/css?family=Nova Round' rel='stylesheet'>
 <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
 <script src="js/todolist.js"></script>
 <script src="js/ForerunnerDB.js"></script>
 <script src="js/know.js"></script>
<title>interesting class</title>
</head> 
<style>

</style>
<body class="body">

 <nav class="navbar navbar-inverse">
<div class="container-fluid">
 <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
<div class="collapse navbar-collapse navbar-collapse-center" id="myNavbar">   
 <ul class="nav navbar-nav">
   <li><a href="#">Wind</a></li>
   <li><a href="#">Home</a></li>
   <li><a href="#">Main</a></li>       
 </ul> 
 <ul class="nav navbar-nav navbar-right">
   <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Personal(≧▽≦)<span class="caret"></span></a>
 <ul class="dropdown-menu">
   <li><a href="#" data-toggle="modal" data-target="#myModal">Little Notebook</a></li>
   <li><a href="#" data-toggle="modal" data-target="#bs-example-modal-lg">Friends</a></li>
   <li role="separator" class="divider"></li>
   <li><a href="#">Separated link</a></li>
 </ul>
  </li>
</ul>
 </div>
</div>
</nav>

 
<div id="todolist"> 
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content-todo">
     <div id="listbg"> 
     <div class="modal-header-todo">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
         <h4 class="modal-title" id="myModalLabel">Notebook(⁎˃ᆺ˂)</h4>
      </div>
      <div class="modal-body-todo">
       <div class="container">
          <input id="input" class="js-task-checkbox" type="text"><button id="add-button" class="btn btn-info btn-sm" onclick="addTask();">加入</button>
       <div class="clear-float">
         <ul id="task-list" style="list-style: none">
          <li class="delete"></li> 
         </ul>
       </div>
      </div>
     </div>
      <div class="modal-footer-todo">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    </div>
  </div>
</div> 
</div>
 
<div class="modal fade" id="bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3>交個朋友吧~</h3>
        <h6>來嘛來嘛!互相交個朋友吧///這裡有些小小的問題想要問你~~~要好好回答喲////</h6> 
      </div>
      <div class="modal-body">
       <div class="container">
        <div class="row">
        <ul>
        <li>
        <h4>你 是 誰 ?</h4>
        <h6>來 來，告訴我你的名字，不然不知道怎麼稱呼你喔OwO</h6>
        <div class="col-md-2"><input type="text" class="form-control" id="name"/></div>
        <button onclick="" class="btn btn-info">確定</button>
        </li>
        <li>
        <h4>敢 問 芳 齡 ??</h4>
        <h6>(小聲)偷偷告訴我你的年紀嘛~~</h6>
        <div class="col-md-2"><input type="text" class="form-control" id="age"/></div>
        <button onclick="" class="btn btn-info">確定</button>
        </li>
        <br>
        <li>
         <h4>還有甚麼話想跟我說的??說越多我越高興喔喔喔www</h4>
         <div class="col-md-4"><textarea type="text" class="form-control" rows="2" id="comment"></textarea></div>
        </li>
         </ul>  
        </div>
        </div>
     </div>
         <div class="modal-footer">
         <button type="button" class="btn btn-default" data-dismiss="modal" id="enter" onclick="quest();">Enter</button>
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div> 

<div id="answer" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
     <div class="modal-header">
     <h1>搜尋結果</h1>
     <p id="searchresult"></p>
      </div>
    </div>
  </div>
</div>

<input id='search'><input type="button" class="btn btn-primary" onclick="search();" data-toggle="modal" data-target="#answer" value="SEARCH">



<button id="list" onclick="showdata();">跑出資料</button>
<div class="container">
<div class="row">    
 <div id="friendlist">
 <table id="friendtable" class="table table-hover" style="width: 300px; height: 40px;">
  <thead>
     <tr>
        <td>ID</td>
        <td>名字</td>
        <td>年紀</td>
        <td>其他</td>
        <td>操作</td>
     </tr>
  </thead>
  <tbody>
  </tbody>
 </table>
 </div>
</div>
</div>
 
<script>
 
 var fdb = new ForerunnerDB();
 var db = fdb.db("friend");
 var friendCollection = db.collection('friend');
 friendCollection.load(); 
 $("div#friendlist").hide();

  function quest(){
    var  q1 = $("input#name").val();
    $("input#name").val("");
    var  q2 = $("input#age").val();
    $("input#age").val("");
    var  q3 = $("textarea#comment").val();
   $("textarea#comment").val("");
   var newfriend = {
    name: q1,
    age: q2,
    other: q3
 };
  friendCollection.insert(newfriend);
  friendCollection.save();
  showdata();
  }  
  $("#input").val("");
 function showdata(){
 $("tbody").text("");
 $("div#friendlist").show();
 for(var i=0;i<friendCollection.find().length;i++){
  var comment = "<tr>"+"<td>"+friendCollection.find()[i]._id+"</td>"+"<td>"+friendCollection.find()[i].name+"</td>"+"<td>"+friendCollection.find()[i].age+"</td>"+"<td>"+friendCollection.find()[i].other+"</td>"+"<td><input type='button' class='btn btn-danger"+i+"' onclick='deletedetail("+i+");' value='DELETE'></td></tr>";
  $("table#friendtable tbody").append(comment);
 };
 };
$("table").on("click","button#enter",quest);
  

 
 function deletedetail(i){
  var r=confirm("確定要刪除嗎?")
  console.log(i);
  if (r==true){
  friendCollection.remove({
    _id: friendCollection.find()[i]._id
});
  friendCollection.save();
  showdata();
  }
  else
    {
    alert("好的!不刪除!");
    }
 } 
  
 function search(){
  var query = {
    name: $("input#search").val()
};
  result = DB.collection("friend").find(query);
  console.log(result);
 }
 
 function showdetail(){
   var id = $(this).text();
   var query={
     _id:id
   };
   $("#menu").append(commentdata);
 }
 
 $("table").on("click","a#showdetail",showdetail)
 
 
 </script>
 
 <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
 <script type="text/javascript" src="js/bootstrap.min.js"></script>
 </body>
</html> 
  
