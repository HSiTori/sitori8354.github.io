<html>
<head>
 <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
 <link rel="stylesheet" type="text/css" href="main.css/todolist.css"/>
 <link rel="stylesheet" type="text/css" href="main.css/main.css"/>
 <link href='//fonts.googleapis.com/css?family=Nova Round' rel='stylesheet'>
 <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
 <script src="js/todolist.js"></script>
 <script src="js/ForerunnerDB.js"></script>
 <script src="js/know.js"></script>
<title>interesting class</title>
</head> 

 <body class="body">
 <div id="background">
 
 <!--上方列表-->
 <nav class="navbar navbar-inverse">
<div class="container-fluid">
<div id="container-headbox"> 
 <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
<div class="collapse navbar-collapse navbar-collapse-center" id="myNavbar">   
  <ul class="nav navbar-nav">
    <li><a href="#">Wind</a></li>
    <li><a href="#">Home</a></li>
    <li><a href="#">Main</a></li>       
  </ul> 
  <ul class="nav navbar-nav navbar-right">
    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Personal(≧▽≦)<span class="caret"></span></a>
  <ul class="dropdown-menu">
    <li><a href="#" data-toggle="modal" data-target="#myModal">Little Notebook</a></li>
    <li><a href="#" data-toggle="modal" data-target="#bs-example-modal-lg">Friends</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="#">Separated link</a></li>
  </ul>
    </li>
  </ul>
 </div>
</div> 
</div>
</nav>

<div class="container">
<div class="row"> 

 <!--搜尋-->
 <div class="col-md-12">
    <input id='search'>&nbsp;<input type="button" class="btn btn-primary" onclick="searchdetail();" value="SEARCH">
 </div>
 
<!--搜尋(範圍)--> 
<div class="col-md-12">
    <input type="number" id="searchmore" style="width: 104px;" placeholder="大於...">
    <input type="number" id="searchless" style="width: 104px;" placeholder="小於..."> 
    &nbsp;<input type="button" class="btn btn-primary" onclick="" value="篩選">
</div>

<!--搜尋(特定標籤)--> 
<div class="col-md-12">
    男生<input id="gender" type="checkbox" name="boy" value="boy">
    女生<input id="gender" type="checkbox" name="girl" value="girl">
    <input type="button" class="btn btn-primary" onclick="select();" value="篩選"> 
</div>

<!--輸入名單-->
<div class="col-md-6">
<div class="select-body" style="width: 500px;">
   <div class="container" style="width: 500px;">
       <div class="form-group">
          <label for="inputage">你的名字</label>
          <input id="name" type="text" class="form-control" style="width: 225px;" placeholder="Enter your name">
          <small id="joke" class="form-text text-muted"></small>
       </div>
       <div class="form-group">
          <label for="inputage">年齡</label>
          <input id="age" type="text" class="form-control" style="width: 225px;" placeholder="Enter your age">
          <small id="joke" class="form-text text-muted"></small>
       </div>
       <div class="form-group">
          <label for="inputage">性別</label>
          <input id="sex" type="text" class="form-control" style="width: 225px;" placeholder="boy or girl?">
          <small id="joke" class="form-text text-muted"></small>
       </div>
       <div class="form-group">
          <label for="inputother">其他</label>
          <input id="comment" type="text" class="form-control" style="width: 225px;" placeholder="something else?">
          <small id="joke" class="form-text text-muted"></small>
       </div>
          <select id="job-id">
          <optiondata>
            <option value="">請選擇職業</option>
            <option value="1beda312sd">學生</option> 
          </optiondata>
          </select>  
      <button type="button" class="btn btn-default" id="enter" onclick="addfriend();">Enter</button>
      <button type="button" class="btn btn-default" id="list" onclick="showfriend();">跑出資料</button>
   </div>
</div>
</div>
 
<!--新增下拉列表--> 
<div class="col-md-6">
   <h4>ADD JOB</h4>
   <input id='add-job-input'><input id='add-job-btn' type="button" class="btn btn-primary" onclick="addjob();" value="新增">
   <input type="button" onclick="showjob();" value='跑出資料'>
</div>
 
<!--表格一--> 
<div class="col-md-6">
<div id="friendlist">
  <table id="friendtable" class="table table-hover" style="width: 500px; height: 40px;">
    <thead>
     <tr>
        <td>ID</td>
        <td>名字</td>
        <td>性別</td>
        <td>年紀</td>
        <td>其他</td>
        <td>操作</td>
     </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>
</div>

<!--表格二--> 
<div class="col-md-6">
<div id="job-type"> 
   <table id="table-job" class="table table-hover" style="width: 500px; height: 40px;">
     <thead>
       <tr>
        <td>id</td>  
        <td>職業</td>
        <td>操作</td>
       </tr>
     </thead>
     <tbody>
     </tbody>
   </table>
</div>
</div>
 
</div>
</div> 

<!--todolist Modal--> 
<div id="todolist"> 
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content-todo">
     <div id="listbg"> 
     <div class="modal-header-todo">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
         <h4 class="modal-title" id="myModalLabel">Notebook(⁎˃ᆺ˂)</h4>
     </div>
     <div class="modal-body-todo">
     <div class="container">
          <input id="input" class="js-task-checkbox" type="text"><button id="add-button" class="btn btn-info btn-sm" onclick="addTask();">加入</button>
     <div class="clear-float">
         <ul id="task-list" style="list-style: none">
           <li class="delete"></li> 
         </ul>
     </div>
     </div>
     </div>
     <div class="modal-footer-todo">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
     </div>
    </div>
    </div>
  </div>
</div> 
</div>

<!--搜尋結果 Modal-->
<div id="answer" class="modal fade bs-example-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
     <div class="modal-header">
       <h1>搜尋結果:</h1>
       <p id="searchresult"></p>
       <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
     </div>
   </div> 
</div>
</div>

<!--修改資料 Modal--> 
<div id="changedata" class="modal fade bs-example-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
     <div class="modal-header">
       <h1>修改資料</h1>   
     <div class="modal-body">
     <div class="container">
     <div class="row">
      <form>
      <div class="form-group">
        <label for="inputname">想要更改的名字?</label>
        <input class="form-control" id="inputname" placeholder="Enter your name">
        <small id="joke" class="form-text text-muted">呵呵呵呵呵呵</small>
      </div>
      <div class="form-group">
        <label for="inputage">想要更改的年齡?</label>
        <input class="form-control" id="inputage" placeholder="Enter your age">
        <small id="joke" class="form-text text-muted">呵呵呵呵呵呵</small>
      </div>
      <div class="form-group">
        <label for="inputother">其他?</label>
        <input class="form-control" id="inputother" placeholder="others">
        <small id="joke" class="form-text text-muted">呵呵呵呵呵呵</small>
      </div>
      </form>
     </div>
     </div>
     </div>
      <div class="modal-footer">
         <button type="button" class="btn btn-default" data-dismiss="modal" id="change" onclick="changedetail();">Enter</button>
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
     <p id="searchresult"></p>
      </div>
    </div>
  </div>
</div>
</div>

<!--提醒視窗-->  
<div id="alert" class="modal fade bs-example-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
     <div class="modal-header">
       <h4>小提醒~~~</h4> 
       <p id="alertresult"></p>
       <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
     </div>
   </div> 
</div>
</div> 
  
  
  
  
<script>
 
 //創建資料庫
 var fdb = new ForerunnerDB();
 var db = fdb.db("資料庫");
 
 var friendCollection = db.collection("friend");
 friendCollection.load(); 
 $("div#friendlist").hide();
 
 var jobCollection = db.collection("job");
 jobCollection.load(); 
 $("div#job-type").hide();
 
//加入資料(表一)
 function addfriend(){
    
    var  q1 = $("input#name").val();
    $("input#name").val("");
    var  q2 = $("input#age").val();
    $("input#age").val("");
    var  q3 = $("input#comment").val();
    $("input#comment").val("");
    var  q4 = $("input#sex").val();
    $("input#sex").val("");
   
    var newfriend = {
      name: q1,
      age: q2,
      others: q3,
      sex: q4
    };
  
    if(q1!==""){
      friendCollection.insert(newfriend);
      friendCollection.save();
     }else{
      $("p#alertresult").text("");
      $("p#alertresult").append("Please Enter Your Name.");
      $("#alert").modal();
     }
      showfriend();
 };  
  
 $("#input").val("");

 function showfriend(){
   $("#friendtable tbody").text("");
   $("div#friendlist").show();
   for(var i=0;i<friendCollection.find().length;i++){
       var comment = "<tr>"+"<td>"+friendCollection.find()[i]._id+"</td>"+"<td>"+friendCollection.find()[i].name+"</td>"+"<td>"+friendCollection.find()[i].sex+"</td>"+"<td>"+friendCollection.find()[i].age+"</td>"+"<td>"+friendCollection.find()[i].others+"</td>"+"<td><input type='button' class='btn btn-info' id='changefirst' data-id='"+friendCollection.find()[i]._id+"' data-toggle='modal' data-target='#changedata' onclick='changedefirst();' value='修改'>&nbsp<input type='button' class='btn btn-danger btn-xs"+i+"' onclick='deletefrienddetail("+i+");' value='刪除'></td></tr>";
       $("table#friendtable tbody").append(comment);
   };
 };

 $("table").on("click","button#enter",addfriend);

 //刪除資料(表一)
 function deletefrienddetail(i){
    var r=confirm("確定要刪除嗎?")
    //console.log(i);
    if (r==true){
       friendCollection.remove({ _id: friendCollection.find()[i]._id });
       friendCollection.save();
       showfriend();
    }else{
       alert("好的!不刪除!");
    }
 } 

//加入資料(表二)
 function addjob(){
    var p1 = $("#add-job-input").val();
    $("input#add-job-input").val("");
    var newjob = {
       type: p1
    };
    if(p1!==""){
      jobCollection.insert(newjob);
      jobCollection.save();
    }else{
      alert("請輸入一個新職業")
    }
    showjob();
 };
 
 function showjob(){
   $("#table-job tbody").text("");
   $("div#job-type").show();
   for(var i=0;i<jobCollection.find().length;i++){
      var data = "<tr>"+"<td>"+jobCollection.find()[i]._id+"</td>"+"<td>"+jobCollection.find()[i].type+"</td>"+"<td>"+"<input type='button' class='btn btn-danger btn-xs"+i+"' onclick='deletejobdetail("+i+");' value='刪除'></td></tr>";
      $("table#table-job tbody").append(data);
   }
 }
 
 $("table").on("click","button#add-job-btn",addjob);  
 
 //刪除資料(表二)
 function deletejobdetail(i){
  var r=confirm("確定要刪除嗎?")
  console.log(i);
  if (r==true){
    jobCollection.remove({ _id: jobCollection.find()[i]._id });
    jobCollection.save();
    showjob();
  }else{
    alert("好的!不刪除!");
  }
 };  

//搜尋(單字:名字)
function searchdetail(){
  var query = {
    name: $("input#search").val()
  };
  var result = friendCollection.find(query);
  if(result!=""){
    $("p#searchresult").text("");
    for(var i=0;i<result.length;i++){
       var searchdata = "Name:"+"&nbsp;"+result[i].name+"<br>"+"Sex:"+"&nbsp;"+result[i].sex+"<br>"+"Age:"+"&nbsp;"+result[i].age+"<br>"+"Others:"+"&nbsp;"+result[i].others+"<br>" 
       $("p#searchresult").append(searchdata)
    }
    $("div#answer").modal();
    }else{
      alert("搜尋錯誤");
    }
    $("input#search").val("");
 }
 
//搜尋(勾選選項) 
function select(){ 
var checklist = [ ]
for(var i=0;i<$("#gender:checked").length;i++){
    checklist.push($("#gender:checked")[i].value)
   }
}
 
function range(){  

  if( $("searchless").val()!== ""){
    var rangeresult = friendCollection.find({  
        age: {
        "$gt" : $("#searchmore").val()/1
        "$lt" : $("#searchless").val()/1
        }       
    });
   $("p#searchresult").text("");
   for(var i=0;i<rangeresult.length;i++){
      $("p#searchresult").append("Name:"+"&nbsp;"+result[i].name+"<br>"+"Sex:"+"&nbsp;"+result[i].sex+"<br>"+"Age:"+"&nbsp;"+result[i].age+"<br>"+"Others:"+"&nbsp;"+result[i].others+"<br>")
   }
   $("#answer").modal();
   }else if( $("searchless").val()== "" && $("searchmore").val()!== ""){
    var rangeresult = friendCollection.find({  
        age: {
        "$gt" : $("#searchmore").val()/1
        }       
    });
    $("p#searchresult").text("");
    for(var i=0;i<rangeresult.length;i++){
      $("p#searchresult").append("Name:"+"&nbsp;"+result[i].name+"<br>"+"Sex:"+"&nbsp;"+result[i].sex+"<br>"+"Age:"+"&nbsp;"+result[i].age+"<br>"+"Others:"+"&nbsp;"+result[i].others+"<br>")
   }
    $("#answer").modal(); 
   }else{
    alert("搜尋錯誤");
    
//} 
 
 
 
 
 </script>
 
 <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
 <script type="text/javascript" src="js/bootstrap.min.js"></script>
 
 </body> 
</html> 
  
